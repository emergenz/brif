{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));var _react=_interopRequireWildcard(require(\"react\"));var _Modal=require(\"../../composites/Modal\");var _hooks=require(\"../../../hooks\");var _reactNative=require(\"react-native-web/dist/index\");var _Context=require(\"../Modal/Context\");var _Box=_interopRequireDefault(require(\"../../primitives/Box\"));var _ActionSheetContext=require(\"./ActionSheetContext\");var _useHasResponsiveProps=require(\"../../../hooks/useHasResponsiveProps\");var _this=this,_jsxFileName=\"/Users/adityajamuar/Sites/projects/nativebase/NativeBase/src/components/composites/Actionsheet/ActionsheetContent.tsx\";var ActionsheetContent=function ActionsheetContent(_ref,ref){var children=_ref.children,props=(0,_objectWithoutProperties2.default)(_ref,[\"children\"]);var _usePropsResolution=(0,_hooks.usePropsResolution)('ActionsheetContent',props),_dragIndicator=_usePropsResolution._dragIndicator,resolvedProps=(0,_objectWithoutProperties2.default)(_usePropsResolution,[\"_dragIndicator\"]);var _React$useContext=_react.default.useContext(_Context.ModalContext),handleClose=_React$useContext.handleClose;var _React$useContext2=_react.default.useContext(_ActionSheetContext.ActionSheetContext),hideDragIndicator=_React$useContext2.hideDragIndicator;var pan=_react.default.useRef(new _reactNative.Animated.ValueXY()).current;var sheetHeight=_react.default.useRef(0);var panResponder=_react.default.useRef(_reactNative.PanResponder.create({onStartShouldSetPanResponder:function onStartShouldSetPanResponder(){return true;},onMoveShouldSetPanResponder:function onMoveShouldSetPanResponder(_evt,gestureState){return gestureState.dy>15;},onPanResponderMove:function onPanResponderMove(e,gestureState){if(gestureState.dy>0){_reactNative.Animated.event([null,{dy:pan.y}],{useNativeDriver:false})(e,gestureState);}},onPanResponderRelease:function onPanResponderRelease(_e,gestureState){if(sheetHeight.current/4-gestureState.dy<0){_reactNative.Animated.timing(pan,{toValue:{x:0,y:sheetHeight.current},duration:150,useNativeDriver:true}).start(handleClose);}else{_reactNative.Animated.spring(pan,{toValue:{x:0,y:0},overshootClamping:true,useNativeDriver:true}).start();}}})).current;if((0,_useHasResponsiveProps.useHasResponsiveProps)(props)){return null;}return _react.default.createElement(_reactNative.Animated.View,{style:{transform:[{translateY:pan.y}],width:'100%'},onLayout:function onLayout(event){var height=event.nativeEvent.layout.height;sheetHeight.current=height;},pointerEvents:\"box-none\",__self:_this,__source:{fileName:_jsxFileName,lineNumber:60,columnNumber:5}},!hideDragIndicator?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_Box.default,(0,_extends2.default)({py:5},panResponder.panHandlers,{collapsable:false,__self:_this,__source:{fileName:_jsxFileName,lineNumber:74,columnNumber:11}}))):null,_react.default.createElement(_Modal.Modal.Content,(0,_extends2.default)({},resolvedProps,{ref:ref,safeAreaBottom:true,__self:_this,__source:{fileName:_jsxFileName,lineNumber:78,columnNumber:7}}),!hideDragIndicator?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_Box.default,(0,_extends2.default)({pt:3,pb:3,mt:-2},panResponder.panHandlers,{width:\"100%\",alignItems:\"center\",collapsable:false,__self:_this,__source:{fileName:_jsxFileName,lineNumber:82,columnNumber:13}}),_react.default.createElement(_Box.default,(0,_extends2.default)({},_dragIndicator,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:91,columnNumber:15}})))):null,children));};var _default=(0,_react.memo)((0,_react.forwardRef)(ActionsheetContent));exports.default=_default;","map":{"version":3,"sources":["ActionsheetContent.tsx"],"names":["ActionsheetContent","children","props","_dragIndicator","resolvedProps","handleClose","React","ModalContext","hideDragIndicator","ActionSheetContext","pan","Animated","sheetHeight","panResponder","PanResponder","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","gestureState","onPanResponderMove","dy","useNativeDriver","onPanResponderRelease","toValue","x","y","duration","overshootClamping","transform","translateY","width","height","event"],"mappings":"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","sourcesContent":["import React, { memo, forwardRef } from 'react';\nimport { Modal } from '../../composites/Modal';\nimport type { IActionsheetContentProps } from './types';\nimport { usePropsResolution } from '../../../hooks';\nimport { Animated, PanResponder } from 'react-native';\nimport { ModalContext } from '../Modal/Context';\nimport Box from '../../primitives/Box';\nimport { ActionSheetContext } from './ActionSheetContext';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nconst ActionsheetContent = (\n  { children, ...props }: IActionsheetContentProps,\n  ref?: any\n) => {\n  const { _dragIndicator, ...resolvedProps } = usePropsResolution(\n    'ActionsheetContent',\n    props\n  );\n  const { handleClose } = React.useContext(ModalContext);\n  const { hideDragIndicator } = React.useContext(ActionSheetContext);\n  const pan = React.useRef(new Animated.ValueXY()).current;\n  const sheetHeight = React.useRef(0);\n\n  const panResponder = React.useRef(\n    PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onMoveShouldSetPanResponder: (_evt, gestureState) => {\n        return gestureState.dy > 15;\n      },\n      onPanResponderMove: (e, gestureState) => {\n        if (gestureState.dy > 0) {\n          Animated.event([null, { dy: pan.y }], {\n            useNativeDriver: false,\n          })(e, gestureState);\n        }\n      },\n      onPanResponderRelease: (_e, gestureState) => {\n        // If sheet is dragged 1/4th of it's height, close it\n        if (sheetHeight.current / 4 - gestureState.dy < 0) {\n          Animated.timing(pan, {\n            toValue: { x: 0, y: sheetHeight.current },\n            duration: 150,\n            useNativeDriver: true,\n          }).start(handleClose);\n        } else {\n          Animated.spring(pan, {\n            toValue: { x: 0, y: 0 },\n            overshootClamping: true,\n            useNativeDriver: true,\n          }).start();\n        }\n      },\n    })\n  ).current;\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n  return (\n    <Animated.View\n      style={{\n        transform: [{ translateY: pan.y }],\n        width: '100%',\n      }}\n      onLayout={(event) => {\n        const { height } = event.nativeEvent.layout;\n        sheetHeight.current = height;\n      }}\n      pointerEvents=\"box-none\"\n    >\n      {!hideDragIndicator ? (\n        <>\n          {/* To increase the draggable area */}\n          <Box py={5} {...panResponder.panHandlers} collapsable={false} />\n        </>\n      ) : null}\n\n      <Modal.Content {...resolvedProps} ref={ref} safeAreaBottom>\n        {!hideDragIndicator ? (\n          <>\n            {/* Hack. Fix later. Add -2 negative margin to remove the padding added by ActionSheetContent */}\n            <Box\n              pt={3}\n              pb={3}\n              mt={-2}\n              {...panResponder.panHandlers}\n              width=\"100%\"\n              alignItems=\"center\"\n              collapsable={false}\n            >\n              <Box {..._dragIndicator} />\n            </Box>\n          </>\n        ) : null}\n\n        {children}\n      </Modal.Content>\n    </Animated.View>\n  );\n};\n\nexport default memo(forwardRef(ActionsheetContent));\n"]},"metadata":{},"sourceType":"script"}