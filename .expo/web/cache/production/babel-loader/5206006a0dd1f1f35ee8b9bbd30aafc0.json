{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=exports.SelectContext=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _toConsumableArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native-web/dist/index\");var _Actionsheet=require(\"../../composites/Actionsheet\");var _Box=_interopRequireDefault(require(\"../Box\"));var _Input=require(\"../Input\");var _focus=require(\"@react-native-aria/focus\");var _hooks=require(\"../../../hooks\");var _useThemeProps=require(\"../../../hooks/useThemeProps\");var _interactions=require(\"@react-native-aria/interactions\");var _utils=require(\"../../../utils\");var _FormControl=require(\"../../composites/FormControl\");var _utils2=require(\"../../../theme/tools/utils\");var _Icons=require(\"../Icon/Icons\");var _ScrollView=require(\"../../basic/ScrollView\");var _useHasResponsiveProps=require(\"../../../hooks/useHasResponsiveProps\");var _this=this,_jsxFileName=\"/Users/adityajamuar/Sites/projects/nativebase/NativeBase/src/components/primitives/Select/Select.tsx\";var unstyledSelecWebtStyles={width:'100%',height:'100%',appearance:'none',WebkitAppearance:'none',MozAppearance:'none'};var SelectContext=_react.default.createContext({onValueChange:function onValueChange(){},selectedValue:null,_selectedItem:{},_item:{}});exports.SelectContext=SelectContext;var Select=function Select(_ref2,ref){var _layoutProps$height;var wrapperRef=_ref2.wrapperRef,props=(0,_objectWithoutProperties2.default)(_ref2,[\"wrapperRef\"]);var selectProps=(0,_FormControl.useFormControl)({isDisabled:props.isDisabled,nativeID:props.nativeID});var isDisabled=selectProps.disabled;var tempFix='__NativebasePlaceholder__';var _ref=_react.default.useRef(null);var _React$useState=_react.default.useState(false),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),isOpen=_React$useState2[0],setIsOpen=_React$useState2[1];var _useFocusRing=(0,_focus.useFocusRing)(),focusProps=_useFocusRing.focusProps,isFocusVisible=_useFocusRing.isFocusVisible;var _useHover=(0,_interactions.useHover)({isDisabled:isDisabled},_ref),hoverProps=_useHover.hoverProps,isHovered=_useHover.isHovered;var _usePropsResolution=(0,_useThemeProps.usePropsResolution)('Input',props,{isDisabled:isDisabled,isHovered:isHovered,isFocusVisible:isFocusVisible}),onValueChange=_usePropsResolution.onValueChange,selectedValue=_usePropsResolution.selectedValue,children=_usePropsResolution.children,dropdownIcon=_usePropsResolution.dropdownIcon,dropdownCloseIcon=_usePropsResolution.dropdownCloseIcon,dropdownOpenIcon=_usePropsResolution.dropdownOpenIcon,placeholder=_usePropsResolution.placeholder,accessibilityLabel=_usePropsResolution.accessibilityLabel,defaultValue=_usePropsResolution.defaultValue,_item=_usePropsResolution._item,_selectedItem=_usePropsResolution._selectedItem,size=_usePropsResolution.size,resolvedProps=(0,_objectWithoutProperties2.default)(_usePropsResolution,[\"onValueChange\",\"selectedValue\",\"children\",\"dropdownIcon\",\"dropdownCloseIcon\",\"dropdownOpenIcon\",\"placeholder\",\"accessibilityLabel\",\"defaultValue\",\"_item\",\"_selectedItem\",\"size\"]);var _useControllableState=(0,_hooks.useControllableState)({value:selectedValue,defaultValue:defaultValue,onChange:function onChange(newValue){onValueChange&&onValueChange(newValue);setIsOpen(false);}}),_useControllableState2=(0,_slicedToArray2.default)(_useControllableState,2),value=_useControllableState2[0],setValue=_useControllableState2[1];var itemsList=_react.default.Children.map(children,function(child){return{label:child.props.label,value:child.props.value};});var selectedItemArray=itemsList.filter(function(item){return item.value===value;});var selectedItem=selectedItemArray&&selectedItemArray.length?selectedItemArray[0]:null;var _usePropsResolution2=(0,_useThemeProps.usePropsResolution)('Select',props),variant=_usePropsResolution2.variant,customDropdownIconProps=_usePropsResolution2.customDropdownIconProps,_actionSheetContent=_usePropsResolution2._actionSheetContent,newProps=(0,_objectWithoutProperties2.default)(_usePropsResolution2,[\"variant\",\"customDropdownIconProps\",\"_actionSheetContent\"]);var _extractInObject=(0,_utils2.extractInObject)(newProps,(0,_toConsumableArray2.default)(_utils2.stylingProps.border)),_extractInObject2=(0,_slicedToArray2.default)(_extractInObject,2),borderProps=_extractInObject2[0],remainingProps=_extractInObject2[1];var _extractInObject3=(0,_utils2.extractInObject)(remainingProps,[].concat((0,_toConsumableArray2.default)(_utils2.stylingProps.margin),(0,_toConsumableArray2.default)(_utils2.stylingProps.layout),(0,_toConsumableArray2.default)(_utils2.stylingProps.flexbox),(0,_toConsumableArray2.default)(_utils2.stylingProps.position),(0,_toConsumableArray2.default)(_utils2.stylingProps.background),['children'])),_extractInObject4=(0,_slicedToArray2.default)(_extractInObject3,2),layoutProps=_extractInObject4[0],nonLayoutProps=_extractInObject4[1];if((0,_useHasResponsiveProps.useHasResponsiveProps)(props)){return null;}var rightIcon=isOpen&&dropdownOpenIcon?dropdownOpenIcon:!isOpen&&dropdownCloseIcon?dropdownCloseIcon:dropdownIcon?dropdownIcon:_react.default.createElement(_Icons.ChevronDownIcon,(0,_extends2.default)({},customDropdownIconProps,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:125,columnNumber:7}}));var commonInput=_react.default.createElement(_Input.Input,(0,_extends2.default)({\"aria-hidden\":true,importantForAccessibility:\"no\",value:selectedItem==null?void 0:selectedItem.label,placeholder:placeholder,editable:false,focusable:false,size:size,variant:variant,InputRightElement:rightIcon,height:(_layoutProps$height=layoutProps.height)!=null?_layoutProps$height:layoutProps.h},nonLayoutProps,borderProps,{isDisabled:isDisabled,__self:_this,__source:{fileName:_jsxFileName,lineNumber:129,columnNumber:5}}));var handleClose=function handleClose(){return setIsOpen(false);};return _react.default.createElement(_Box.default,(0,_extends2.default)({borderWidth:1,borderColor:\"transparent\"},layoutProps,{borderRadius:resolvedProps.borderRadius,ref:wrapperRef,__self:_this,__source:{fileName:_jsxFileName,lineNumber:149,columnNumber:5}}),_reactNative.Platform.OS==='web'?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_Box.default,{w:\"100%\",h:\"100%\",position:\"absolute\",opacity:\"0\",zIndex:1,__self:_this,__source:{fileName:_jsxFileName,lineNumber:158,columnNumber:11}},_react.default.createElement(\"select\",(0,_extends2.default)({\"aria-readonly\":selectProps.readOnly,required:selectProps.required,disabled:isDisabled},focusProps,hoverProps,{ref:(0,_utils.mergeRefs)([ref,_ref]),style:unstyledSelecWebtStyles,onChange:function onChange(e){setValue(e.target.value);},value:selectedItem===null?tempFix:value,\"aria-label\":placeholder,__self:_this,__source:{fileName:_jsxFileName,lineNumber:159,columnNumber:13}}),_react.default.createElement(\"option\",{disabled:true,value:tempFix,__self:_this,__source:{fileName:_jsxFileName,lineNumber:174,columnNumber:15}},placeholder),children)),commonInput):_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_reactNative.Pressable,{onPress:function onPress(){_reactNative.Keyboard.dismiss();setIsOpen(true);},disabled:isDisabled,accessibilityLabel:accessibilityLabel,accessibilityRole:\"button\",ref:(0,_utils.mergeRefs)([ref,_ref]),__self:_this,__source:{fileName:_jsxFileName,lineNumber:184,columnNumber:11}},_react.default.createElement(_reactNative.View,{pointerEvents:\"none\",__self:_this,__source:{fileName:_jsxFileName,lineNumber:194,columnNumber:13}},commonInput)),_react.default.createElement(_Actionsheet.Actionsheet,{isOpen:isOpen,onClose:handleClose,__self:_this,__source:{fileName:_jsxFileName,lineNumber:196,columnNumber:11}},_react.default.createElement(_Actionsheet.Actionsheet.Content,(0,_extends2.default)({},_actionSheetContent,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:197,columnNumber:13}}),_react.default.createElement(_ScrollView.ScrollView,{width:\"100%\",__self:_this,__source:{fileName:_jsxFileName,lineNumber:198,columnNumber:15}},_react.default.createElement(SelectContext.Provider,{value:{onValueChange:setValue,selectedValue:value,_selectedItem:_selectedItem!=null?_selectedItem:{},_item:_item!=null?_item:{}},__self:_this,__source:{fileName:_jsxFileName,lineNumber:199,columnNumber:17}},children))))));};var _default=(0,_react.memo)((0,_react.forwardRef)(Select));exports.default=_default;","map":{"version":3,"sources":["Select.tsx"],"names":["unstyledSelecWebtStyles","width","height","appearance","WebkitAppearance","MozAppearance","SelectContext","React","onValueChange","selectedValue","_selectedItem","_item","Select","wrapperRef","props","selectProps","isDisabled","nativeID","tempFix","_ref","isOpen","setIsOpen","focusProps","isFocusVisible","hoverProps","isHovered","children","dropdownIcon","dropdownCloseIcon","dropdownOpenIcon","placeholder","accessibilityLabel","defaultValue","size","resolvedProps","value","setValue","onChange","itemsList","label","child","selectedItemArray","item","selectedItem","variant","customDropdownIconProps","_actionSheetContent","newProps","borderProps","remainingProps","stylingProps","layoutProps","nonLayoutProps","rightIcon","commonInput","handleClose","Platform","e","Keyboard"],"mappings":"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","sourcesContent":["import React, { forwardRef, memo } from 'react';\nimport type { ISelectProps } from './types';\nimport { Platform, View, Pressable, Keyboard } from 'react-native';\nimport { Actionsheet } from '../../composites/Actionsheet';\nimport Box from '../Box';\nimport { Input } from '../Input';\nimport { useFocusRing } from '@react-native-aria/focus';\nimport { useControllableState } from '../../../hooks';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport { useHover } from '@react-native-aria/interactions';\nimport { mergeRefs } from '../../../utils';\nimport { useFormControl } from '../../composites/FormControl';\nimport { extractInObject, stylingProps } from '../../../theme/tools/utils';\nimport { ChevronDownIcon } from '../Icon/Icons';\nimport type { IButtonProps } from '../Button/types';\nimport { ScrollView } from '../../basic/ScrollView';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nconst unstyledSelecWebtStyles = {\n  width: '100%',\n  height: '100%',\n  appearance: 'none',\n  WebkitAppearance: 'none',\n  MozAppearance: 'none',\n};\n\nexport const SelectContext = React.createContext({\n  onValueChange: (() => {}) as any,\n  selectedValue: null as any,\n  _selectedItem: {} as IButtonProps,\n  _item: {} as IButtonProps,\n});\n\nconst Select = ({ wrapperRef, ...props }: ISelectProps, ref: any) => {\n  const selectProps = useFormControl({\n    isDisabled: props.isDisabled,\n    nativeID: props.nativeID,\n  });\n\n  const isDisabled = selectProps.disabled;\n  const tempFix = '__NativebasePlaceholder__';\n  const _ref = React.useRef(null);\n\n  const [isOpen, setIsOpen] = React.useState<boolean>(false);\n\n  const { focusProps, isFocusVisible } = useFocusRing();\n  const { hoverProps, isHovered } = useHover({ isDisabled }, _ref);\n\n  const {\n    onValueChange,\n    selectedValue,\n    children,\n    dropdownIcon,\n    dropdownCloseIcon,\n    dropdownOpenIcon,\n    placeholder,\n    accessibilityLabel,\n    defaultValue,\n    _item,\n    _selectedItem,\n    size,\n    ...resolvedProps\n  } = usePropsResolution('Input', props, {\n    isDisabled,\n    isHovered,\n    isFocusVisible,\n  });\n\n  const [value, setValue] = useControllableState({\n    value: selectedValue,\n    defaultValue,\n    onChange: (newValue) => {\n      onValueChange && onValueChange(newValue);\n      setIsOpen(false);\n    },\n  });\n\n  const itemsList: Array<{ label: string; value: string }> = React.Children.map(\n    children,\n    (child: any) => {\n      return {\n        label: child.props.label,\n        value: child.props.value,\n      };\n    }\n  );\n\n  const selectedItemArray = itemsList.filter(\n    (item: any) => item.value === value\n  );\n  const selectedItem =\n    selectedItemArray && selectedItemArray.length ? selectedItemArray[0] : null;\n\n  const {\n    variant,\n    customDropdownIconProps,\n    _actionSheetContent,\n    ...newProps\n  } = usePropsResolution('Select', props);\n  const [borderProps, remainingProps] = extractInObject(newProps, [\n    ...stylingProps.border,\n  ]);\n  const [layoutProps, nonLayoutProps] = extractInObject(remainingProps, [\n    ...stylingProps.margin,\n    ...stylingProps.layout,\n    ...stylingProps.flexbox,\n    ...stylingProps.position,\n    ...stylingProps.background,\n    'children',\n  ]);\n\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n\n  const rightIcon =\n    isOpen && dropdownOpenIcon ? (\n      dropdownOpenIcon\n    ) : !isOpen && dropdownCloseIcon ? (\n      dropdownCloseIcon\n    ) : dropdownIcon ? (\n      dropdownIcon\n    ) : (\n      <ChevronDownIcon {...customDropdownIconProps} />\n    );\n\n  const commonInput = (\n    <Input\n      aria-hidden={true}\n      importantForAccessibility=\"no\"\n      value={selectedItem?.label}\n      placeholder={placeholder}\n      editable={false}\n      focusable={false}\n      size={size}\n      variant={variant}\n      InputRightElement={rightIcon}\n      height={layoutProps.height ?? layoutProps.h}\n      {...nonLayoutProps}\n      {...borderProps}\n      isDisabled={isDisabled}\n    />\n  );\n\n  const handleClose = () => setIsOpen(false);\n\n  return (\n    <Box\n      borderWidth={1}\n      borderColor=\"transparent\"\n      {...layoutProps}\n      borderRadius={resolvedProps.borderRadius}\n      ref={wrapperRef}\n    >\n      {Platform.OS === 'web' ? (\n        <>\n          <Box w=\"100%\" h=\"100%\" position=\"absolute\" opacity=\"0\" zIndex={1}>\n            <select\n              aria-readonly={selectProps.readOnly}\n              required={selectProps.required}\n              disabled={isDisabled}\n              {...focusProps}\n              {...hoverProps}\n              ref={mergeRefs([ref, _ref])}\n              //@ts-ignore\n              style={unstyledSelecWebtStyles}\n              onChange={(e) => {\n                setValue(e.target.value);\n              }}\n              value={selectedItem === null ? tempFix : value}\n              aria-label={placeholder}\n            >\n              <option disabled value={tempFix}>\n                {placeholder}\n              </option>\n              {children}\n            </select>\n          </Box>\n          {commonInput}\n        </>\n      ) : (\n        <>\n          <Pressable\n            onPress={() => {\n              Keyboard.dismiss();\n              setIsOpen(true);\n            }}\n            disabled={isDisabled}\n            accessibilityLabel={accessibilityLabel}\n            accessibilityRole=\"button\"\n            ref={mergeRefs([ref, _ref])}\n          >\n            <View pointerEvents=\"none\">{commonInput}</View>\n          </Pressable>\n          <Actionsheet isOpen={isOpen} onClose={handleClose}>\n            <Actionsheet.Content {..._actionSheetContent}>\n              <ScrollView width=\"100%\">\n                <SelectContext.Provider\n                  value={{\n                    onValueChange: setValue,\n                    selectedValue: value,\n                    _selectedItem: _selectedItem ?? {},\n                    _item: _item ?? {},\n                  }}\n                >\n                  {children}\n                </SelectContext.Provider>\n              </ScrollView>\n            </Actionsheet.Content>\n          </Actionsheet>\n        </>\n      )}\n    </Box>\n  );\n};\n\nexport default memo(forwardRef(Select));\n"]},"metadata":{},"sourceType":"script"}